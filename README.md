# Azure Monitor Custom Monitoring Solution Design Document
## Executive Summary
       This document outlines a custom monitoring solution using Azure Monitor and Log Analytics to replicate and enhance the capabilities previously achieved with Logic Monitor. The focus is on monitoring virtual machines (VMs), with specific attention to disk space usage, system uptime, process count, Windows services status, and security events. This solution is designed for an Azure Solutions Architect aiming to demonstrate Azure Monitor's capabilities to customers.

## Solution Overview
       The proposed solution leverages Azure Monitor and Log Analytics to provide comprehensive monitoring and alerting capabilities for virtual machines within Azure. Key metrics such as disk space, system uptime, process count, and the status of Windows services and security events will be monitored. Custom KQL queries will be utilized to trigger alerts based on specified thresholds or conditions.

## System Requirements
       - Azure subscription
       - Virtual Machines to monitor
       - Log Analytics Workspace
       - Azure Monitor

## Detailed Design
       1. **Data Collection Configuration**:
           - **Windows Event Logs**: Collect specific logs for monitoring Windows Services Status and Windows Security Events.
           - **Performance Counters**: Collect metrics for Disk Space Usage, System Uptime, and Process Count.
       2. **KQL Queries for Monitoring**:
           Custom KQL queries will be created to analyze the collected data and identify conditions requiring attention or alerting.
       3. **Alerting Strategy**:
           Alerts will be configured based on the output of KQL queries to notify the helpdesk or relevant stakeholders of potential issues.
       4. **Integration with Service Now**:
           Alerts generated by Azure Monitor will be exported to Service Now to ensure efficient issue tracking and resolution.
       5. **Customer Reporting**:
           Reports will be generated and sent to customers via email, detailing the performance and status of their VMs.

## Implementation Plan
       - Setup Log Analytics workspace and configure data sources.
       - Install and configure the Log Analytics agent on target VMs.
       - Develop and test custom KQL queries for monitoring and alerting.
       - Configure alerting rules in Azure Monitor and integrate with Service Now.
       - Setup automated reporting for customer insights.

## Cost Management
       The solution will leverage cost-optimization strategies such as selective logging, appropriate data retention settings, and choosing the right pricing tier for Log Analytics to ensure that monitoring costs remain within budget.

## Conclusion
       The Azure Monitor Custom Monitoring Solution offers a robust, scalable, and cost-effective approach to monitoring Azure VMs, providing vital insights into system performance and security. This solution allows for proactive management of resources, ensuring high availability and security.